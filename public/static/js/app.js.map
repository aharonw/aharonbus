{"version":3,"file":"../public/static/js/app.js","sources":["app/app.coffee","app/collections/base-collection.coffee","app/collections/stops-collection.coffee","app/config.coffee","app/models/prediction-model.coffee","app/models/stop-model.coffee","app/views/base-view.coffee","app/views/global-view.coffee","app/views/prediction-view.coffee","app/views/stop-view.coffee","app/views/templates/global.jade","app/views/templates/prediction.jade","app/views/templates/predictions.jade"],"names":[],"mappings":"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","sourcesContent":["{Stop}        = require 'models/stop-model'\n{Stops}       = require 'collections/stops-collection'\n\n{GlobalView}  = require 'views/global-view'\n{StopView}    = require 'views/stop-view'\n\nclass Commuter\n\n  constructor: ->\n\n    domDef = $.Deferred()\n    @domReady = domDef.promise()\n\n    @stops = new Stops 1001861\n\n    _.defer =>\n\n      @views =\n        global: new GlobalView @\n        stop:   new StopView collection: @stops\n\n      $ =>\n        domDef.resolve()\n        @$body = $ document.body\n        @views.global.addStopView()\n\n\nmodule.exports = -> window.app = new Commuter","class exports.BaseCollection extends Backbone.Collection\n\n  path: 'http://localhost:1234/'","{BaseCollection} = require 'collections/base-collection'\n{Stop}           = require 'models/stop-model'\n{config}         = require 'config'\n\nclass exports.Stops extends BaseCollection\n\n  model: Stop\n  delay: 20000\n\n  url: =>\n    apiKey = config.wmataKey\n    stopID = @stopID\n    return @path + 'NextBusService.svc/json/JPredictions?StopID=' + stopID + '&api_key=' + apiKey\n\n\n  initialize: (@stopID) ->\n    @poll()\n    @\n\n\n  poll: (delay) ->\n    setInterval =>\n      @updatePredictions()\n      console.log 'fetch'\n    , 10000\n\n\n  updatePredictions: ->\n    console.log 'update'\n    @fetch\n      success : @showShit\n      error   : @awful\n\n  showShit: (collection, response, options) ->\n    console.log \"fetched\"\n    stop = collection.toJSON()[0]\n    app.views.stop.render(collection.first()).el\n\n\n  awful: (collection, response, options) ->\n    response = response.responseText\n    console.log response","exports.config = \n  wmataKey: 'jyauyx2uz4hur2pvbd4t5znd'","class exports.Prediction extends Backbone.Model","class exports.Stop extends Backbone.Model\n\n  idAttribute: '_id'","class exports.BaseView extends Backbone.View\n\n  template: (data) ->\n    require(\"views/templates/#{ @templateName }\") data\n\n  render: (data) ->\n    @$el.html @template data\n    @","{BaseView} = require 'views/base-view'\n\nclass exports.GlobalView extends BaseView\n\n  el: '#content'\n  templateName: 'global'\n\n  initialize: (app) ->\n    $.when(app.domReady).then @render\n\n  render: =>\n    @$el.html @template()\n    @$logo = @$ '#logo'\n    @\n\n  addStopView: ->\n    @$el.append app.views.stop.el","{BaseView}   = require 'views/base-view'\n{Prediction} = require 'models/prediction-model'\n\nclass exports.PredictionView extends BaseView\n\n  tagName: 'li'\n  class: 'prediction'\n  templateName: 'prediction'\n  model: Prediction\n\n  initialize: (@prediction) ->\n\n  render: ->\n    super prediction: @prediction\n    @","{Stop}           = require 'models/stop-model'\n{BaseView}       = require 'views/base-view'\n{PredictionView} = require 'views/prediction-view'\n\nclass exports.StopView extends BaseView\n\n  id: 'stop'\n  Model: Stop\n  SubView: PredictionView\n  templateName: 'predictions'\n\n  render: (data) ->\n    super\n    @stopName        = data.get 'StopName'\n    @predictions     = data.get 'Predictions'\n\n    @subViews        = []\n    @$predictionList = @$ '#prediction-list'\n    fragment         = document.createDocumentFragment()\n\n    for prediction in @predictions\n      fragment.appendChild @makeSubView prediction\n\n    @$predictionList.append fragment\n\n    @\n\n\n  makeSubView: (prediction) ->\n    @subViews.push subView = new @SubView prediction\n    subView.render().el","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div class=\\\"wrapper\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),prediction = locals_.prediction;\nbuf.push(\"<div class=\\\"minutes\\\">\" + (jade.escape((jade_interp = prediction.Minutes) == null ? '' : jade_interp)) + \"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<ul id=\\\"prediction-list\\\"></ul>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}"]}